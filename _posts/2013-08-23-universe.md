---
layout: post
title:  "Universe!"
date:   2013-08-23 14:18:42
categories: project universe
---
# About

I played Black Stars [1](http://navissal.com/projets/Black%20Stars) [2](https://itunes.apple.com/us/app/black-stars/id512945753?mt=8) recently a lot,
and I am wondering how difficult it would be to recreate the game in Javascript?

For those who don´t know, the game is a pretty simple but addicting RTS, where you conquer planets against an AI (or even multiplayer).
It´s a bit like Risk, but faster.

Here is what it looks like:

![Black Stars Screenshot](/img/BlackStarsScreenShot.png)


# The challange...
... is to rewrite the Game logic in Javascript. I´d like to write a module that can
process moves and return the new world state as a result.

# The rules
The game consists of players, planets ( with units ) and fleets

## Planets:

* Every second the planet produces new units, defined by the planets production level ( 1 to 3 ). The higher the production level, the more units a produced per second.
* Each planet has a defined set of links to other planets, which can be set, but never destroyed
* The planet can be upgraded 3 times in total, either upgrading its production level or its defense level
* When a fleet reaches a planet, and the fleets owner is not the planets owner, there is battle and the planet defends itself (based on its defense level). If the planet´s and fleet´s player match, the units stationed on the planet are reinforced by the fleet and the fleet is disbanded.
* When a planet is attacked, number of units on planets times a factor given by the planets defense level are compared to the number of ships in the attacking fleet. The larger number wins. If it is the fleet, the planet is conquered.
* Planets may neutral (= not owned by a player). In this case they keep their initial number of units and do not produce new ones.


## Fleets:

* If you send units from one planet to another, you create a fleet
* The fleet takes all of the ships that are stationed on the planet and immediately travels to the destination planet.
* Fleets can only travel over existing links between planets.
* A fleet reaching a planet either reinforces or tries to invade the planet.
* If a fleet invades a planet it automatically is owned by the fleet´s owner and the fleet is disbanded.
* If fleets meet in space there is a space battle. The fleet with more ships wins. If both fleets have the same amount of ships, both are eliminated.


## Winning

* The game is over when one player defeats all other players (no planets left)  

# The attack plan

That is it basically. It should be pretty easy to write a set of tests for this specification. Based on these tests i want to write a Javascript module that, given a certain game state and a time can calculate the new game state based on the rules above.


# The main function

My idea is to have a single function that takes the game state as a single parameter and returns the advanced, proceessed state.

Something like:

{% highlight javascript %}
while ( !state.gameOver ) {
    state = game.advanceState( state );
}
{% endhighlight %}

